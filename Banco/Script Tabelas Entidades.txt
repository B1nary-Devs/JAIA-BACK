CREATE SEQUENCE AUTOINCREMENT_PRESTADOR_ID
START WITH 1
INCREMENT BY 1;

CREATE TABLE Prestador(
    prestador_id NUMBER DEFAULT AUTOINCREMENT_PRESTADOR_ID.NEXTVAL,
    CNPJ VARCHAR2(14) CONSTRAINT UQ_Prestador_CNPJ UNIQUE,
    email VARCHAR2(100) CONSTRAINT UQ_Prestador_Email UNIQUE,
    senha VARCHAR2(150),
    prestador_nome VARCHAR2(100),
    categoria_id NUMBER,
    CONSTRAINT PK_ID_PRESTADOR PRIMARY KEY (prestador_id) 
);

CREATE SEQUENCE AUTOINCREMENT_CATEGORIA_ID
START WITH 1
INCREMENT BY 1;

CREATE TABLE Categoria (
    categoria_id NUMBER DEFAULT AUTOINCREMENT_CATEGORIA_ID.NEXTVAL,
    categoria_nome VARCHAR2(100)  CONSTRAINT UQ_Categoria_NOME UNIQUE, 
    CONSTRAINT PK_CATEGORIA_NOME PRIMARY KEY (categoria_id)
);

ALTER TABLE Prestador
ADD CONSTRAINT FK_PRESTADOR_Checklist
FOREIGN KEY (categoria_id) REFERENCES Categoria (categoria_id);

CREATE SEQUENCE AUTOINCREMENT_CHECKLIST_ID
START WITH 1
INCREMENT BY 1;

CREATE TABLE Checklist (
    checklist_id NUMBER DEFAULT AUTOINCREMENT_CHECKLIST_ID.NEXTVAL,
    checklist_nome VARCHAR2(150),
    CONSTRAINT PK_CHECKLIST_ID PRIMARY KEY (CHECKLIST_ID)
);

CREATE TABLE relacao_categoria_checklist (
    categoria_id NUMBER,
    checklist_id NUMBER,
    CONSTRAINT FK_RelacaoCategoriaChecklist_Categoria FOREIGN KEY (categoria_id) 
    REFERENCES Categoria (categoria_id),
    CONSTRAINT FK_RelacaoCategoriaChecklist_Checklist
    FOREIGN KEY (checklist_id) REFERENCES Checklist (checklist_id)
);

CREATE SEQUENCE AUTOINCREMENT_CLIENTE_ID
START WITH 1
INCREMENT BY 1;

create table cliente (
    CLIENTE_ID NUMBER DEFAULT AUTOINCREMENT_CLIENTE_ID.NEXTVAL,
    CNPJ VARCHAR2(14) CONSTRAINT UQ_CLIENTE_CNPJ UNIQUE,
    CONSTRAINT PK_ID_CLIENTE PRIMARY KEY (cliente_id)
    )
    
    
CREATE SEQUENCE AUTOINCREMENT_ORDEN_SERVICO_ID
START WITH 1
INCREMENT BY 1;

create table ordem_servico(
    ORDEM_SERVICO_ID NUMBER DEFAULT AUTOINCREMENT_ORDEN_SERVICO_ID.NEXTVAL,
    CLIENTE_ID NUMBER,
    data_abertura DATE DEFAULT SYSDATE,
    data_fechamento DATE,
    status VARCHAR2(100),
    CONSTRAINT PK_ID_ORDEM_SERVICO PRIMARY KEY (ORDEM_SERVICO_ID),
    CONSTRAINT FK_CLIENTE_ORDEM_SERVICO FOREIGN KEY (CLIENTE_ID) 
    REFERENCES CLIENTE (CLIENTE_ID)
    )

CREATE TABLE RELACAO_ORDEM_SERVICO_PRESTADOR (
    ORDEM_SERVICO_ID NUMBER,
    PRESTADOR_ID NUMBER,
    CONSTRAINT FK_Relacao_PRESTADOR_ORDEM_SERVICO FOREIGN KEY (ORDEM_SERVICO_ID) 
    REFERENCES ORDEM_SERVICO (ORDEM_SERVICO_ID),
    CONSTRAINT FK_Relacao_ORDEM_SERVICO_PRESTADOR FOREIGN KEY (PRESTADOR_ID) 
    REFERENCES  PRESTADOR (PRESTADOR_ID)
);
